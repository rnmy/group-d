<%- include("../partials/header") %>

<div class="jumbotron pt-2 pb-2">
    <div class="container">
      <h1 class="display-4">Change Password</h1>
    </div>
  </div>
  <div class="container">
    <form action="/users/<%= user._id%>/change_password?_method=PUT" method="POST">
      <div class="form-group">
        <input class="form-control" type="password" name="current" minlength="8" placeholder="current password" required>
      </div>
      <div class="form-group">
        <input class="form-control" type="password" id="new" name="new" minlength="8" onkeyup="check()" placeholder="new password" required>
      </div>
      <div class="form-group">
        <input class="form-control" type="password" id="confirm" name="confirm" minlength="8" onkeyup="check()" placeholder="confirm new password" required>
        <span id='message'></span>
      </div>
      <a class="btn btn-primary" href="/users/<%= user._id%>">Go back</a>
      <input id="submit" class="btn btn-success" type="submit">
    </form>
    <script>
      function check() {
       if (document.getElementById('new').value && document.getElementById('new').value ==
         document.getElementById('confirm').value) {
         document.getElementById('message').style.color = 'green';
         document.getElementById('message').innerHTML = 'Matching';
         document.getElementById('submit').disabled = false
       } else {
         document.getElementById('message').style.color = 'red';
         document.getElementById('message').innerHTML = 'Not matching';
         document.getElementById('submit').disabled = true
       }
     }
     </script>
  </div>

<%- include("../partials/footer") %>