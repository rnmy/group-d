<%- include("../partials/header") %>

    <div class="container">
      <div class="jumbotron pt-2 pb-2">
        <div class="container">
          <h1 class="display-4">You are now editing:</h1>
          <h1><%= event.name%></h1>
        </div>
      </div>
      <div class="container">
        <form action="/events/<%= event._id%>?_method=PUT" method="POST">
          <div class="form-group">
            <label class="text-primary" for="eventname">Event Name:</label>
            <input class="form-control" id="eventname" type="text" name="event[name]" value="<%= event.name %>" required>
          </div>
          <div class="form-group">
            <label class="text-primary" for="eventurl">Event Website:</label>
            <input class="form-control" id="eventurl" typeb g="text" name="event[url]" value="<%= event.url %>" required>
          </div>
          <div class="form-group">
            <label class="text-primary" for="description">Description:</label>
            <textarea class="form-control" id="description" type="text" name="event[desc]" value="<%= event.desc %>" required><%= event.desc%></textarea>
          </div>
          <div class="form-group mb-3">
            <label class="text-primary" for="cat">Category (Maximum of 3):</label><br>
            <select name="cat[]" id="cat" class="selectpicker" title="<%= event.cat %>" data-max-options="3" multiple required data-width="420px">
                <option value="Arts">Arts</option>
                <option value="Business">Business</option>
                <option value="Computing">Computing</option>
                <option value="Engineering">Engineering</option>
                <option value="Government & Politics">Government & Politics</option>
                <option value="Medical">Medical</option>
                <option value="Science">Science</option>
                <option value="Others">Others</option>
            </select>
        </div>
          <div class="form-group">
            <label class="text-primary" for="requirements">Requirements:</label>
            <textarea class="form-control" id="requirements" type="text" name="event[requirements]" value="<%= event.requirements %>" required><%= event.requirements%></textarea>
          </div>
          <div class="form-group">
            <label class="text-primary" for="prizes">Prizes:</label>
            <textarea class="form-control" id="prizes" type="text" name="event[prizes]" value="<%= event.prizes %>" required><%= event.prizes%></textarea>
          </div>
          <div class="form-group">
            <label class="text-primary" for="date">Event Date:</label>
            <input class="form-control" id="date" type="date" name="event[date]" value="<%= event.date.toISOString().substr(0, 10) %>" min="<%= new Date().toISOString().substr(0, 10) %>" required>
          </div>
          <div class="form-group">
            <label class="text-primary" for="deadline">Registration Deadline:</label>
            <input class="form-control" id="deadline" type="date" name="event[deadline]" value="<%= event.deadline.toISOString().substr(0, 10) %>" min="<%= new Date().toISOString().substr(0, 10) %>" required>
          </div>
          <div class="form-group">
            <label class="text-primary" for="min">Minimum Group Size:</label>
            <input class="form-control" id="min" type="number" min="1" name="event[minGroupSize]" value="<%= event.minGroupSize %>" required>
          </div>
          <div class="form-group">
            <label class="text-primary" for="max">Maximum Group Size:</label>
            <input class="form-control" id="max" type="number" min="1" name="event[maxGroupSize]" value="<%= event.maxGroupSize %>" required>
          </div>
          <a class="btn btn-primary" href="/events/<%= event._id%>">Go back</a>
          <input class="btn btn-success" type="submit">
        </form>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
    <script>
        const cat = <%- JSON.stringify(cat) %>
        console.log(cat)
        if(cat.length !== 0) {
            $('.selectpicker').selectpicker('val', cat)
        }
    </script>
  </body>
</html>
